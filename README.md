一、 项目整体架构逻辑
该系统采用了典型的分层设计思路：

数据/逻辑层 (Manager, ManageBook 等)：虽然你没上传这些类的具体 .cpp 实现，但从 main_gui.cpp 的调用可以看出，它们负责处理读者、图书和借书记录的增删改查。

工具层 (ManageTime)：提供时间转换、日期计算等通用功能。

表现层 (main_gui.cpp)：利用 EasyX 库将枯燥的控制台程序转变为具有侧边栏、卡片和统计图表的图形化系统。

二、 manageTime.h 逻辑分析
时间管理是借阅系统的核心（涉及借书期限、逾期罚款）。该类主要解决了 "时间对象" (time_t) 与 "数据库字符串" (YYYYMMDDHHMMSS) 之间的互转。

核心功能点：
格式化转换 (TimeToString / StringToTime)：

将 C++ 标准时间戳转换为 20251217093000 这种易于存储在 .txt 文件中的格式。

使用 sscanf 和 sprintf 进行精确的位操作，确保时间精度到秒。

业务逻辑计算 (AddMonth)：

实现了手动计算“一个月后”的日期。它不仅简单地增加月份，还考虑了闰年（2月29日）以及大小月（30/31天）的溢出处理（例如：1月31日的下个月是2月28日）。

差异计算 (calculateDaysDifference)：

利用 difftime 计算秒差，再换算成天数。

使用了 ceil（向上取整），这意味着即使只逾期了1分钟，也会按1天计算，这符合现实中图书馆的计费逻辑。

三、 main_gui.cpp 交互逻辑分析
这个文件是程序的大脑，负责“看”和“做”。

1. 界面绘制思路
程序采用了 “状态机” 的设计模式。通过 currentPage 变量来决定当前屏幕画什么：

侧边栏 (drawNavigation)：始终显示在左侧，负责切换状态。

主视口：根据枚举值（PAGE_HOME, PAGE_BOOK 等）调用不同的绘制函数。

响应式视觉：代码中定义了大量的常量（如 COLOR_HEADER, COLOR_BTN），并通过 ptInRect 函数检测鼠标坐标，实现了按钮的点击反馈。

2. 数据流转逻辑
初始化：程序启动时，首先通过 fopen 检查是否存在 readers.txt 等文件，并调用 load 加载数据。

动态列表：在展示图书或读者列表时，加入了 “滚动偏置” (scrollOffset) 和 “斑马纹” 效果，增强了 UI 的可读性。

输入交互：由于 EasyX 本身不提供复杂的文本框组件，代码巧妙地封装了 showInputDialog 函数，利用 InputBox 弹出原生窗口来获取用户输入。

3. 业务操作流程（以借书为例）
当用户点击“借书”按钮时：

获取输入：弹出框获取读者 ID 和图书 ID。

合法性校验：检查读者是否存在、图书是否有库存。

时间计算：调用 ManageTime 获取当前时间，并让用户输入借阅天数，计算出应还日期。

状态同步：更新图书剩余数量、读者借阅状态，并立即执行 save 操作，防止程序意外崩溃导致数据丢失。
